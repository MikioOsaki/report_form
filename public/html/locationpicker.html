<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Example</title>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDgSKKb3lq63ahMz0eovj6oJqOtImNnQK0"></script>
    <script src="https://unpkg.com/location-picker/dist/location-picker.min.js"></script>
    <style type="text/css">
        #map {
            width: 100%;
            height: 480px;
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <br>
    <span id="onIdlePositionView"></span>
    <br>
    <button id="confirmPosition">Diese Position übernehmen</button>

    <p>Tipp: Verschieben Sie die Karte, um eine neue Position festlegen</p>


    <script>
        // Get element references
        var confirmBtn = document.getElementById('confirmPosition');
        var onIdlePositionView = document.getElementById('onIdlePositionView');

        // Initialize locationPicker plugin
        var lp = new locationPicker('map', {
            setCurrentPosition: true, // You can omit this, defaults to true
        }, {
            zoom: 11 // You can set any google map options here, zoom defaults to 15
        });

        // Listen to button onclick event
        confirmBtn.onclick = function () {
            // Get current location and show it in HTML
            var location = lp.getMarkerPosition();
            window.location = "form?lat=" + location.lat + "&lng=" + location.lng;
        };

        // Listen to map idle event, listening to idle event more accurate than listening to ondrag event
        google.maps.event.addListener(lp.map, 'idle', function (event) {
            // Get current location and show it in HTML
            var location = lp.getMarkerPosition();
            onIdlePositionView.innerHTML = 'Folgende Position ist ausgewählt: ' + location.lat + ',' + location
                .lng;
        });
    </script>

</body>

</html>